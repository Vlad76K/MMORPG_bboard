{% extends 'flatpages/default.html' %}

{% load static %}

{% block title %}
Posts
{% endblock title %}

{% block search %}
    <div class="search-bar w3layouts-newsletter">
        <h3 class="sear-head editContent" style = "color: LemonChiffon">Поиск топика</h3>
        <form action="{% url 'bboardapp:search' %}" method="get" class="d-flex editContent" >
            {% csrf_token %}
            <input type="search" placeholder="Введите название..." name="q" class="form-control" required="">
            <button type="submit" class="btn1 btn" ><span class="fa fa-search" aria-hidden="true"></span></button>
        </form>
    </div>
    <form action="{% url 'bboardapp:filter' %}" method="get">
        <div class="left-side my-4">
            <h3 class="sear-head editContent" style = "color: LemonChiffon">Категории</h3>
            <ul class="w3layouts-box-list">
            {% for categ in view.get_category %}
                <li class="editContent" >
                <input type="checkbox" class="checked" name="category_name" value="{{ categ.category_name }}">
                <span class="span editContent" style = "color: LemonChiffon">{{ categ.category_name }}</span>
                </li>
            {% endfor %}
            </ul>
        </div>
        <button type="submit">Найти</button>
    </form>
    <br><br>
    <form action="{% url 'bboardapp:my_posts' %}" method="get">
        <button type="submit">Мои посты</button>
    </form>
{% endblock search %}

{% block content %}
    <div class="background" id="home" style="background-color: rgb(105, 105, 105);">
<!--        # background-image: url(&quot;../media/images/s2.jpg&quot;);">-->

    <form action="" method="post">
        {% csrf_token %}

        <a style = "font-family: &quot;Source Sans Pro&quot;, sans-serif;"><font size="7" color="LightSkyBlue"> Наши объявления </font></a>
        <!-- Если в переменной next_sale будет None, то выведется указанный в фильтре текст -->
        <h5><span style = "color: LemonChiffon">{{ next_action|default_if_none:"Чуть позже сообщим о новой акции!" }}</span></h5>
        <br>

        {% if posts %}
            {% for serv in object_list %}
                <!-- Выводим заголовок-->
                <br><br>
                <h3><a href="../posts/{{serv.id}}"><font size="7" color="LemonChiffon">{{ serv.post_title }}</font></a></h3>
                <!-- Выводим автора и дату публикации -->
                <em><font color="LemonChiffon">Автор: {{ serv.post_author.author_user }}  ...  Дата публикации: {{ serv.post_date|date:"d.m.Y" }}</font></em>
                <!-- Выводим текст -->
                <font size="4" color="LemonChiffon">{{ serv.post_text|safe }}</font>
                <a href="../post_update/{{serv.id}}"><font size="3" color="white">Редактировать</font></a>
                <br><br>
            {% endfor %}
        {% else %}
            <h2>Объявлений нет!</h2>
        {% endif %}
    </form>
{% endblock content %}
